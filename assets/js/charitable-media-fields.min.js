/*!  1.4.0 2016-04-27 14:23 */
!function(a,b){a(b).ready(function(){var b={},c=function(a,b,c){var d=a.sizes[b];return d||(d=a.sizes[c]),d},d=function(a,b){var c=[];return a.find("input").each(function(){c.push(parseInt(this.value))}),console.log(c),c};a(".charitable-media-upload[data-uploader=1]").each(function(){var b=a(this),c=b.data("upload-label"),d=b.data("key");b.find("img").length&&(c=b.data("change-label")),b.find("input[type=file]").remove(),b.append('<a href="#" class="upload">'+c+"</a>").append('<input type="hidden" name="'+d+'" value="" />')}),a(".charitable-media-upload[data-uploader=1] .upload").on("click",function(e){var f=a(this),g=f.parent(".charitable-media-upload"),h=g.find("img"),i=g.data("size")||"thumbnail",j=(g.data("media")||"image",g.data("multiple")||!1),k=g.data("user"),l=g.data("key"),m=g.data("upload-label"),n=g.data("upload-button"),o=b[l],p=d(g,l);return e.preventDefault(),o?void o.open():(o=wp.media.frames.file_frame=wp.media({frame:"select",title:m,button:{text:n},library:{author:k},content:{AttachmentView:!1},multiple:j,displaySettings:!1}),o.on("select",function(){var a,b=o.state().get("selection").length,e=o.state().get("selection").models,k=0;for(j&&g.find("input[name="+l+"]").remove(),k;b>k;k++){if(console.log(e[k]),a=c(e[k].changed,i,"thumbnail"),Number.isInteger(i))var m=n=i;else var m=a.width,n=a.height;h.length>0&&h.remove(),g.prepend('<img src="'+a.url+'" width="'+m+'" height="'+n+'" />'),j?g.append('<input type="hidden" name="'+l+'[]" value="'+e[k].id+'" />'):g.find("input[name="+l+"]").val(e[k].id)}h=f.find("img"),p=d(g,l),console.log(p)}),o.open(),void(b[l]=o))})})}(jQuery,document);