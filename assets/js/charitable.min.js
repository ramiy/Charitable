/*!  1.3.7 2016-05-25 17:42 */
jQuery.noConflict(),CHARITABLE={},CHARITABLE.Toggle={toggleTarget:function(a){var b=a.data("charitable-toggle");return jQuery("#"+b).toggleClass("charitable-hidden",a.is(":checked")),!1},hideTarget:function(a){var b=a.data("charitable-toggle");jQuery("#"+b).addClass("charitable-hidden")},init:function(){var a=this;jQuery("[data-charitable-toggle]").each(function(){return a.hideTarget(jQuery(this))}).on("click",function(b){return a.toggleTarget(jQuery(this))})}},CHARITABLE.DonationSelection={selectOption:function(a){var b=a.closest("li");if(b.hasClass("selected"))return!1;var c=a.closest(".charitable-form");return c.find(".donation-amount.selected").removeClass("selected"),b.addClass("selected"),b.hasClass("custom-donation-amount")&&b.find("input.custom-donation-input").focus(),!1},init:function(){var a=this;jQuery(".donation-amount input:checked").each(function(){jQuery(this).closest("li").addClass("selected")}),jQuery(".charitable-form").on("click",".donation-amount",function(b){a.selectOption(jQuery(this))}),jQuery(".charitable-form").on("focus","input.custom-donation-input",function(a){jQuery(this).closest("li").find("input[name=donation_amount]").prop("checked",!0).trigger("change")})}},CHARITABLE.AJAXDonate={onClick:function(a){var b=jQuery(a),c=b.serializeArray().reduce(function(a,b){return a[b.name]=b.value,a},{}),d=b.position(),e=b.parent("#charitable-donation-form-modal");return b.find(".charitable-form-processing").show(),c.action="make_donation",c.form_action=c.charitable_action,delete c.charitable_action,jQuery.ajax({type:"POST",data:c,dataType:"json",url:CHARITABLE_VARS.ajaxurl,xhrFields:{withCredentials:!0},success:function(a){a.success&&(window.location.href=a.redirect_to),b.find(".charitable-form-processing").hide(),b.find(".charitable-form-errors").length&&b.find(".charitable-form-errors").remove(),b.prepend(a.errors),e.length?e.scrollTop(0):window.scrollTo(d.left,d.top)}}).fail(function(a,b,c){window.console&&window.console.log&&console.log(a),window.scrollTo(d.left,d.top)}).done(function(a){}),!1},init:function(){var a=this;jQuery("body").on("submit","#charitable-donation-form[data-use-ajax=1]",function(b){return a.onClick(this)})}},CHARITABLE.SanitizeURL=function(a){var b=a.value.toLowerCase();!/^https?:\/\//i.test(b)&&b.length>0&&(b="http://"+b,a.value=b)},CHARITABLE.Modal={init:function(){jQuery.fn.leanModal&&jQuery("[data-trigger-modal]").leanModal({closeButton:".modal-close"})}},CHARITABLE.PaymentMethodSelection={loaded:!1,getActiveMethod:function(a){return jQuery("#charitable-gateway-selector input[name=gateway]:checked").val()},hideInactiveMethods:function(a){var a=a||this.getActiveMethod();jQuery("#charitable-gateway-fields .charitable-gateway-fields[data-gateway!="+a+"]").hide()},showActiveMethod:function(a){jQuery("#charitable-gateway-fields .charitable-gateway-fields[data-gateway="+a+"]").show()},init:function(){var a=this,b=jQuery("#charitable-gateway-selector input[name=gateway]");0!==b.length&&(a.hideInactiveMethods(),a.loaded||(jQuery("body").on("change","#charitable-gateway-selector input[name=gateway]",function(){a.hideInactiveMethods(),a.showActiveMethod(jQuery(this).val())}),a.loaded=!0))}},CHARITABLE.Accounting={format_currency:function(a,b){return"undefined"==typeof b&&(b=""),accounting.formatMoney(a,{symbol:b,decimal:CHARITABLE_VARS.currency_format_decimal_sep,thousand:CHARITABLE_VARS.currency_format_thousand_sep,precision:CHARITABLE_VARS.currency_format_num_decimals,format:CHARITABLE_VARS.currency_format}).trim()},unformat_currency:function(a){return Math.abs(parseFloat(accounting.unformat(a,CHARITABLE_VARS.currency_format_decimal_sep)))},init:function(){var a=this;jQuery("body").on("blur",".custom-donation-input",function(b){var c=a.unformat_currency(jQuery(this).val());if(jQuery.trim(c)>0){var d=a.format_currency(c);jQuery(this).val(d)}})}},function(){jQuery(document).ready(function(){CHARITABLE.Toggle.init(),CHARITABLE.DonationSelection.init(),CHARITABLE.AJAXDonate.init(),CHARITABLE.PaymentMethodSelection.init(),CHARITABLE.Modal.init(),CHARITABLE.Accounting.init()})}();